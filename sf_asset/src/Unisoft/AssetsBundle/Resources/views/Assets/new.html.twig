{% extends "UnisoftAssetsBundle::layout.html.twig" %}
{% block title %}{% trans %}Manufacturers list{% endtrans %}{% endblock %}

{% block content %}


{% for flashMessage in app.session.flashbag.get('notice2') %}
<div  class="alert alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button> 
    <ul>
        <li>{{ flashMessage|nl2br }}</li>
    </ul>
</div>
{% endfor %} 


<section id="main">

    <div class="box">
        <div class="tabbable blue-box">
            <ul class="nav nav-tabs">
                <li class="active"><a href="#tab1" data-toggle="tab">{% trans %}Assets{% endtrans %}</a></li>
                <li class=""><a href="#tab2" data-toggle="tab">{% trans %}Helpdesk{% endtrans %}</a></li>
                <li class=""><a href="#tab3" data-toggle="tab">{% trans %}Maintainace{% endtrans %}</a></li>
                <li class=""><a href="#tab4" data-toggle="tab">{% trans %}Work Orders{% endtrans %}</a></li>
                <li class=""><a href="#tab5" data-toggle="tab">{% trans %}Deprications{% endtrans %}</a></li>
                <li class=""><a href="#tab6" data-toggle="tab">{% trans %}Notifictions{% endtrans %}</a></li>
                <li class=""><a href="#tab7" data-toggle="tab">{% trans %}Reports{% endtrans %}</a></li>
            </ul>
            <div class="tab-content">
                <form class="fill-up" id="form-content" action="{{ path('assets_create') }}" method="post" {{ form_enctype(form) }} novalidate>
                    <div class="container-fluid">
                        <div class="row-fluid">
                            <div class="span6">
                                <div class="row-fluid">
                                    <div class="span12">
                                        <div class="box">
                                            <div class="tab-header">
           {% trans %}Profit{% endtrans %} 
                                                </div>
                                                <div class="tab-pane" id="tab1">
                                                    <div class="padded">

                                                        <table>
                                                            <tr><td> {{ form_label(form.assetSerial) }}</td><td> {{ 
form_widget(form.assetSerial) }}
                                                                            <ul class="gallery clearfix">
                                                                                <li><a class="assets_search" href="{{ url('assets_search', { 'keyword': 'param1','filed':'param2' }) }}?iframe=true&amp;width=100%&height=100%" rel="prettyPhoto" sourceId="unisoft_assetsbundle_assetstype_englishName" fieldName="englishName">Search</a></li>
                                                                            </ul> 
                                                                        </td></tr>
                                                                    <tr><td> {{ form_label(form.manualCode) }}</td><td>  {{ 
form_widget(form.manualCode) }}  </td></tr>
                                                                            <tr><td>  {{ form_label(form.englishName) }}</td><td>   {{ 
form_widget(form.englishName) }}</td></tr>
                                                                                    <tr><td>  {{ form_label(form.arabicName) }}</td><td>  {{ 
form_widget(form.arabicName) }}</td></tr>
                                                                                            <tr><td> {{ form_label(form.category) }}    </td><td>    {{ 
form_widget(form.category) }}</td></tr>                          
                                                                                                    <tr><td> {{ form_label(form.brand) }}    </td><td>    {{ 
form_widget(form.brand) }}</td></tr>   
                                                                                                            <tr><td> {{ form_label(form.guardianshipName) }}    </td><td>    {{ form_widget(form.guardianshipName) }}</td></tr>
                                                                                                            <tr><td> {{ form_label(form.location) }}    </td><td>    {{ form_widget(form.location) }}</td></tr>                 
                                                                                                        </table>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="row-fluid">
                                                                                        <div class="span12">
                                                                                            <div class="box">
                                                                                                <div class="tab-header">
             {% trans %}Financial{% endtrans %}  
                                                                                                    </div>
                                                                                                    <div class="padded">
                                                                                                        <table>
                                                                                                            <tr><td> {{ form_label(form.purchaseInvoiceNo) }}</td><td> {{ 
form_widget(form.purchaseInvoiceNo) }}</td></tr>
                                                                                                                    <tr><td> {{ form_label(form.quantity) }}</td><td>  {{ 
form_widget(form.quantity) }}  </td></tr>
                                                                                                                            <tr><td>  {{ form_label(form.purchaseDate) }}</td><td>   {{ 
form_widget(form.purchaseDate) }}</td></tr>
                                                                                                                                    <tr><td>  {{ form_label(form.unit) }}</td><td>  {{ form_widget
(form.unit) }}</td></tr>
                                                                                                                                            <tr><td> {{ form_label(form.cost) }}    </td><td>    {{ 
form_widget(form.cost) }}</td></tr>                          
                                                                                                                                                    <tr><td> {{ form_label(form.currency) }}    </td><td>    {{ 
form_widget(form.currency) }}</td></tr>   
                                                                                                                                                            <tr><td> {{ form_label(form.warrantyType) }}</td><td> {{ 
form_widget(form.warrantyType) }}</td></tr>
                                                                                                                                                                    <tr><td>{{ form_widget(form.warrantyCount) }}</td></tr>
                                                                                                                                                                    <tr> <td>{{ form_widget(form.warrantyUnit) }}</td>      
                                                                                                                                                                        <td>{{ form_widget(form.warrantyUnit2) }}</td></tr>        
                                                                                                                                                                </table>
                                                                                                                                                                <ul class="recent-comments">
                                                                                                                                                                    <li class="separator">
                                                                                                                                                                    </li>

                                                                                                                                                                    <li class="separator" >

                                                                                                                                                                        <table>
                                                                                                                                                                            <tr><td> {{ form_label(form.depreciationMethod) 
}}</td><td> {{ form_widget(form.depreciationMethod) }}</td></tr>
                                                                                                                                                                                    <tr><td> {{ form_label(form.depreciationRate) 
}}</td><td>  {{ form_widget(form.depreciationRate) }}  </td></tr>
                                                                                                                                                                                            <tr><td>  {{ form_label(form.assetAccountNo) 
}}</td><td>   {{ form_widget(form.assetAccountNo) }}
                                                                                                                                                                                                        <ul class="gallery clearfix">
                                                                                                                                                                                                        <li><a class="assets_search" href="{{ url('assets_search', { 'keyword': 'param1','filed':'param2' }) }}?iframe=true&amp;width=100%&height=100%" rel="prettyPhoto" sourceId="unisoft_assetsbundle_assetstype_assetAccountNo" fieldName="assetAccountNo">Search</a></li>
                                                                                                                                                                                                        </ul> 
                                                                                                                                                                                                        </td></tr>
                                                                                                                                                                                                    <tr><td>  {{ form_label
(form.accumulatedDepAccNo) }}</td><td>  {{ form_widget
(form.accumulatedDepAccNo) }}
                                                                                                                                                                                                        <ul class="gallery clearfix">
                                                                                                                                                                                                        <li><a class="assets_search" href="{{ url('assets_search', { 'keyword': 'param1','filed':'param2' }) }}?iframe=true&amp;width=100%&height=100%" rel="prettyPhoto" sourceId="unisoft_assetsbundle_assetstype_accumulatedDepAccNo" fieldName="accumulatedDepAccNo">Search</a></li>
                                                                                                                                                                                                        </ul> 
                                                                                                                                                                                                        </td></tr>
                                                                                                                                                                                                        <tr><td> {{ form_label
(form.depreciationExpensesAccNo) }}    </td><td>    {{ form_widget
(form.depreciationExpensesAccNo) }}
                                                                                                                                                                                                        <ul class="gallery clearfix">
                                                                                                                                                                                                        <li><a class="assets_search" href="{{ url('assets_search', { 'keyword': 'param1','filed':'param2' }) }}?iframe=true&amp;width=100%&height=100%" rel="prettyPhoto" sourceId="unisoft_assetsbundle_assetstype_depreciationExpensesAccNo" fieldName="depreciationExpensesAccNo">Search</a></li>
                                                                                                                                                                                                        </ul>                                              
                                                                                                                                                                                                        </td></tr>                          
                                                                                                                                                                                                        <tr><td> {{ form_label
(form.profitLossOnSaleOfAssetsAccNo) }}    </td><td>    {{ form_widget
(form.profitLossOnSaleOfAssetsAccNo) }}</td></tr>
                                                                                                                                                                                                        </table>
                                                                                                                                                                                                        </li>
                                                                                                                                                                                                        <li class="separator">
                                                                                                                                                                                                        <table>
                                                                                                                                                                                                        <tr><td> {{ form_label(form.purchaseValue) }}
                                                                                                                                                                                                        </td><td> {{ form_widget(form.purchaseValue) }}</td></tr>
                                                                                                                                                                                                        <tr><td> {{ form_label
(form.currentYearOBDepreciationValue) }}</td><td>  {{ form_widget
(form.currentYearOBDepreciationValue) }}  </td></tr>
                                                                                                                                                                                                        <tr><td>  {{ form_label
(form.currentYearDepreciationValue) }}</td><td>   {{ form_widget
(form.currentYearDepreciationValue) }}</td></tr>
                                                                                                                                                                                                        <tr><td> {{ form_label(form.valueChanges) }}    
                                                                                                                                                                                                        </td><td>    {{ form_widget(form.valueChanges) }}</td></tr>                         

                                                                                                                                                                                                        <tr><td> {{ form_label(form.assetValue) }}    
                                                                                                                                                                                                        </td><td>    {{ form_widget(form.assetValue) }}</td></tr>
                                                                                                                                                                                                        </table>

                                                                                                                                                                                                        </li>
                                                                                                                                                                                                        </ul>
                                                                                                                                                                                                        </div>  
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>
                            </div>

                                                                                                                                                                                                        <div class="span6">
                                                                                                                                                                                                        <div class="row-fluid">
                                                                                                                                                                                                        <ul class="nav nav-tabs">
                                                                                                                                                                                                        <li class="active"><a href="#tab11" data-toggle="tab">{% trans %}Asset Details{% endtrans %}</a></li>
                                                                                                                                                                                                        <li ><a href="#tab12" data-toggle="tab">{% trans %}Service Sheduling{% endtrans %}</a></li>
                                                                                                                                                                                                        </ul>
                                                                                                                                                                                                        <div class="tab-content">
                                                                                                                                                                                                        <div class="tab-pane active" id="tab11">
                                                                                                                                                                                                        <div class="span12">


                                                                                                                                                                                                        <div class="box">



                                                                                                                                                                                                        <div class="padded">

                                                                                                                                                                                                        <table>
                                                                                                                                                                                                        <tr><td> {{ form_label(form.manufacturer) }}</td><td> {{ 
form_widget(form.manufacturer) }}
                                                                                                                                                                                                        <ul class="gallery clearfix">
                                                                                                                                                                                                        <li><a class="assets_search" href="{{ url('assets_search', { 'keyword': 'param1','filed':'param2' }) }}?iframe=true&amp;width=100%&height=100%" rel="prettyPhoto" sourceId="unisoft_assetsbundle_assetstype_manufacturer" fieldName="manufacturer">Search</a></li>
                                                                                                                                                                                                        </ul> 
                                                                                                                                                                                                        </td></tr>
                                                                                                                                                                                                        <tr><td> {{ form_label(form.vendor) }}</td><td> 
 {{ form_widget(form.vendor) }}
                                                                                                                                                                                                        <ul class="gallery clearfix">
                                                                                                                                                                                                        <li><a class="assets_search" href="{{ url('assets_search', { 'keyword': 'param1','filed':'param2' }) }}?iframe=true&amp;width=100%&height=100%" rel="prettyPhoto" sourceId="unisoft_assetsbundle_assetstype_vendor" fieldName="vendor">Search</a></li>
                                                                                                                                                                                                        </ul>
                                                                                                                                                                                                        </td></tr>
                                                                                                                                                                                                        <tr><td>  {{ form_label(form.model) }}</td><td> 
  {{ form_widget(form.model) }}
                                                                                                                                                                                                        <ul class="gallery clearfix">
                                                                                                                                                                                                        <li><a class="assets_search" href="{{ url('assets_search', { 'keyword': 'param1','filed':'param2' }) }}?iframe=true&amp;width=100%&height=100%" rel="prettyPhoto" sourceId="unisoft_assetsbundle_assetstype_model" fieldName="model">Search</a></li>
                                                                                                                                                                                                        </ul> 
                                                                                                                                                                                                        </td></tr>
                                                                                                                                                                                                        <tr><td>Image</td><td colspan="2">   

                                                                                                                                                                                                        <span id="mylink" style="width: 150px; height: 160px; border: 1px solid #000;display: inline-block;">
                                                                                                                                                                                                        <span  id="preview">
                                                                                                                                                                                                        Browse  
                                                                                                                                                                                                        </span>
                                                                                                                                                                                                        </span>   
                                                                                                                                                                                                        </td></tr>

                                                                                                                                                                                                        <tr><td colspan="2"></td></tr>             
                                                                                                                                                                                                        <tr><td>  {{ form_label(form.description) }}
                                                                                                                                                                                                        </td><td>  {{ form_widget(form.description) }}</td></tr>
                                                                                                                                                                                                        <tr><td> {{ form_label
(form.submittedToDepreciation) }}</td><td>{{ form_widget
(form.submittedToDepreciation) }}</td></tr>                          
                                                                                                                                                                                                        <tr><td> {{ form_label(form.assetStatus) }}    
                                                                                                                                                                                                        </td><td>    {{ form_widget(form.assetStatus) }}
                                                                                                                                                                                                        </td></tr>
                                                                                                                                                                                                        </table>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>


                                                                                                                                                                                                        <div class="span12">

                                                                                                                                                                                                        <div class="box" >

                                                                                                                                                                                                        <div class="tab-header">
     {% trans %}Data Category{% endtrans %} 
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        <div class="padded" >
                                                                                                                                                                                                        <table class="table table-striped table-bordered box">
                                                                                                                                                                                                        <thead>
                                                                                                                                                                                                        <tr>
                                                                                                                                                                                                        <th colspan="2">  {% trans %} Data Category{% endtrans %}</th>
                                                                                                                                                                                                        </tr>
                                                                                                                                                                                                        </thead>
                                                                                                                                                                                                        <tbody>
                                                                                                                                                                                                        <tr>
                                                                                                                                                                                                        <td>{{ form_label(form.category) }}</td>
                                                                                                                                                                                                        <td> {{ form_widget(form.category) }}</td>
                                                                                                                                                                                                        </tr>
                                                                                                                                                                                                        </tbody>
                                                                                                                                                                                                        <tfoot>

                                                                                                                                                                                                        </tfoot>
                                                                                                                                                                                                        </table> 

                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>

                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>

                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        <div class="tab-pane" id="tab12">
                                                                                                                                                                                                        <div class="span12">
                                                                                                                                                                                                        <div class="box padded">
                                                                                                                                                                                                        <div id='calendar'></div>

                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        <div class="row-fluid">

                                                                                                                                                                                                        <div class="span12">

                                                                                                                                                                                                        <div class="box" >

                                                                                                                                                                                                        <div class="tab-header">
     {% trans %}Tracking Tags{% endtrans %}  
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        <div class="padded" >

                                                                                                                                                                                                        <table>
                                                                                                                                                                                                        <tr><td> {{ form_label(form.automaticBarcode) }}</td><td> 
{{ form_widget(form.automaticBarcode) }}</td><td>
                                                                                                                                                                                                        <button type="button" class="button " id="generate_barcode">
            {% trans %} Generate Bar Code{% endtrans %}   
                                                                                                                                                                                                        </button>
                                                                                                                                                                                                        </td></tr>
                                                                                                                                                                                                        <tr><td> {{ form_label(form.barcode) }}</td><td>  {{ 
form_widget(form.barcode) }}  </td></tr>
                                                                                                                                                                                                        <tr><td>  {{ form_label(form.rfid) }}</td><td>   {{ 
form_widget(form.rfid) }}</td><td>
                                                                                                                                                                                                        <button type="button" class="button " id="print_label" onclick="print()">
            {% trans %} Print Label{% endtrans %}   
                                                                                                                                                                                                        </button>
                                                                                                                                                                                                        </td></tr>

                                                                                                                                                                                                        </table>
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>

                                                                                                                                                                                                        </div>   
                                                                                                                                                                                                        </div>
                                                                                                                                                                                                        </div>
                        </div>
                                                                                                                                                                                                        <div class="box padded">  
                                                                                                                                                                                                        <button type="submit" class="button blue">  {% trans %}create{% endtrans %}  </button>
                                                                                                                                                                                                        <a href="{{ path('assets') }}" class="button ">
            {% trans %}Back to the list{% endtrans %}   
                                                                                                                                                                                                        </a>
                                                                                                                                                                                                        </div>   
                    </form>
                                                                                                                                                                                                        </div>
                </div></div>
        </div>
</section>

{{ form_widget(form) }}

{% raw %}

                                                                                                                                                                                                        <script type="text/javascript">
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_submittedToDepreciation').attr('checked', true);
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_assetStatus').attr('checked', true);
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_warrantyType_1').attr('checked', true);
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_warrantyUnit2').attr('disabled', true);
                                                                                                                                                                                                        $('#generate_barcode').click(function(){
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_automaticBarcode').val($('#unisoft_assetsbundle_assetstype_assetSerial').val());
                                                                                                                                                                                                        });
                                                                                                                                                                                                        $('#print_label').click(function(){
                                                                                                                                                                                                        alert(  $('#unisoft_assetsbundle_assetstype_automaticBarcode').val());
                                                                                                                                                                                                        });
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_cost').keyup(function() { 
                                                                                                                                                                                                        if($('#unisoft_assetsbundle_assetstype_cost').val().length > 0){
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_purchaseValue').val($('#unisoft_assetsbundle_assetstype_cost').val());
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_purchaseValue').attr('readonly', true);
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else{
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_purchaseValue').removeAttr('readonly');
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_purchaseValue').val('');
                                                                                                                                                                                                        }
                                                                                                                                                                                                        });
                
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_warrantyType_2,#unisoft_assetsbundle_assetstype_warrantyType_1').change(function() {
 
                                                                                                                                                                                                        if( $('#unisoft_assetsbundle_assetstype_warrantyType_2:checked').val()!==undefined){
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_warrantyUnit').attr('disabled', true);
                                                                                                                                                                                                        //alert($('#unisoft_assetsbundle_assetstype_warrantyType_2:checked').val());
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_warrantyUnit2').removeAttr('disabled');
                                                                                                                                                                                                        }
                                                                                                                                                                                                        if( $('#unisoft_assetsbundle_assetstype_warrantyType_1:checked').val()!==undefined){
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_warrantyUnit2').attr('disabled', true);
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_warrantyUnit').removeAttr('disabled');
                                                                                                                                                                                                        }
                                                                                                                                                                                                        });
                                                                                                                                                                                                        </script>
        {% endraw %}
      {% raw %}
                                                                                                                                                                                                        <script type="text/javascript">
                                                                                                                                                                                                        var sampleData = [];

                                                                                                                                                                                                        var sampleData = [];

                                                                                                                                                                                                        var alldata = [];
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_category').live('change', function() {
               
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_brand').empty();
                                                                                                                                                                                                        $.ajax({
                                                                                                                                                                                                        type: "GET",
                                                                                                                                                                                                        dataType: "json",
                                                                                                                                                                                                        url: $(this).find(":selected").val()+"/json1",
                                                                                                                                                                                                        }).done(function( data ) {
                                                                                                                                                                                                        $.each(data , function(key, val){
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_brand').append($('<option></option>').val(val['id']).html(val['englishMame']));
                      
                                                                                                                                                                                                        });
                                                                                                                                                                                                        });  
         
                                                                                                                                                                                                        });
         
                                                                                                                                                                                                        </script>
        {% endraw %}


                                                                                                                                                                                                        <div style="visibility: hidden">
                                                                                                                                                                                                        <form action="{{ path('assets_upload') }}" method="post" {{ form_enctype(upload_form) }} id="imageform">
        {{ form_widget(upload_form) }}
                                                                                                                                                                                                        </form>
                                                                                                                                                                                                        </div>

                                                                                                                                                                                                        <script type="text/javascript">
                                                                                                                                                                                                        $(document).ready(function() {
                                                                                                                                                                                                        $('#mylink').click(function(event) {
                                                                                                                                                                                                        event.preventDefault();
                                                                                                                                                                                                        window["link_clicked"] = true;
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_image').click();
                                                                                                                                                                                                        window["link_clicked"] = false;     
                                                                                                                                                                                                        });

                                                                                                                                                                                                        $('.file_input').click(function(event) {
                                                                                                                                                                                                        if (window["link_clicked"]) {
                                                                                                                                                                                                        //alert("you clicked the link");
                                                                                                                                                                                                        }
                                                                                                                                                                                                        //event.preventDefault();
                                                                                                                                                                                                        });

                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_image').live('change', function()
                                                                                                                                                                                                        { 
    
                                                                                                                                                                                                        $("#preview").html('');
                                                                                                                                                                                                        $("#preview").html('loding.....');
                                                                                                                                                                                                        $("#imageform").ajaxForm({
                                                                                                                                                                                                        dataType:  'json', 
                                                                                                                                                                                                        success:       processJson  // post-submit callback 
                                                                                                                                                                                                        }).submit();
    
                                                                                                                                                                                                        }); 
    
                                                                                                                                                                                                        function processJson(data) { 
                                                                                                                                                                                                        // 'data' is the json object returned from the server 
                                                                                                                                                                                                        $("#preview").html('');
                                                                                                                                                                                                        $('#preview').prepend('<img id="theImg" width="170" height="200" src="{{ asset('upload') }}/'+data.imageName+'" />');
                                                                                                                                                                                                        if(data.error==0){
                                                                                                                                                                                                        $('#unisoft_assetsbundle_assetstype_imageName').val(data.imageName);
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else{
                                                                                                                                                                                                        $("#preview").html(data.msg);
                                                                                                                                                                                                        } 
                                                                                                                                                                                                        }
                                                                                                                                                                                                        });
                                                                                                                                                                                                        </script>
{% endblock %}



